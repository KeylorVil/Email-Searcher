const socket=io();function emailError(){document.querySelector(".main").firstChild.nextElementSibling.textContent="Oops! Something went wrong...",document.querySelector(".main").firstChild.nextElementSibling.nextElementSibling.textContent="Lookup for any typo or mistake on the email and try again!"}function createProfileIcon(e){let t=document.createElement("div"),n=document.createElement("img");n.src="/src/images/icons/icon_person.png",t.appendChild(n),e.appendChild(t)}function resultTopInfo(e,t){let n=document.createElement("h2"),o=document.createElement("p");n.textContent=e.first_name+" "+e.last_name,o.textContent=e.description,t.appendChild(n),t.appendChild(o)}function firstColInfo(e,t){let n=document.createElement("div"),o=document.createElement("h3"),l=document.createElement("p"),d=document.createElement("h3"),a=document.createElement("p");n.classList.add("col"),n.classList.add("first-col"),o.textContent="Address",d.textContent="Email",l.textContent=e.address,a.textContent=e.email,n.appendChild(o),n.appendChild(l),n.appendChild(d),n.appendChild(a),t.appendChild(n)}function secondColInfo(e,t){let n=document.createElement("div"),o=document.createElement("h3"),l=document.createElement("h3");n.classList.add("col"),o.textContent="PhoneNumbers",l.textContent="Relatives",n.appendChild(o),t.appendChild(n);for(let t in e.phone_numbers){let o=document.createElement("span");o.textContent=e.phone_numbers[t],0===parseInt(t)&&o.classList.add("first-number"),n.appendChild(o)}n.appendChild(l);for(let t in e.relatives){let o=document.createElement("p");o.textContent=e.relatives[t],parseInt(t)===e.relatives.length-1&&o.classList.add("last_relative"),n.appendChild(o)}}socket.on("connect",function(){console.log("socket conneted");let e=window.location.href,t=new URL(e).searchParams.get("search");""!==t&&null!=t?socket.emit("searchEmail",{email:t}):(emailError(),document.querySelector("#loader").style.display="none")}),socket.on("response",function(e){let t=JSON.parse(e);if(0!==t.length){document.querySelector("#loader").style.display="none";let e=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div");e.classList.add("result"),o.classList.add("info"),n.classList.add("icon"),l.classList.add("row"),createProfileIcon(n),resultTopInfo(t,o),firstColInfo(t,l),secondColInfo(t,l),o.appendChild(l),e.appendChild(n),e.appendChild(o),document.querySelector(".main").appendChild(e)}else emailError(),document.querySelector("#loader").style.display="none";socket.close()});